<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>サンガツユリのポートフォリオ</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>
    <div class="layout-container">
        <button class="hamburger-menu" id="hamburgerMenu">
            <i class="fas fa-bars"></i>
        </button>

        <aside class="sidebar left-sidebar">
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html"><i class="fas fa-home"></i> ホーム</a></li>
                    <li><a href="blog.html"><i class="fas fa-blog"></i> ブログ</a></li>
                    <li><a href="questions.html"><i class="fas fa-question-circle"></i> 質問募集</a></li>
                    <li><a href="updates.html"><i class="fas fa-history"></i> 更新履歴</a></li>
                    <li><a href="activity.html"><i class="fas fa-user"></i> 動静</a></li> <!-- 動静ページへのリンク -->
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <div class="theme-switch">
                <button id="theme-toggle" class="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>

            <section class="hero">
                <div class="hero-content">
                    <h1>サンガツユリ</h1>
                    <p id="currentStatusDisplay">現在の動静: OFF</p> <!-- 動静を表示する要素 -->
                </div>
            </section>

            <section class="about">
                <div class="about-content">
                    <h2>自己紹介</h2>
                    <div class="profile-content">
                        <p>東京工科大学 コンピュータサイエンス学部 先進情報専攻 1年生</p>
                        <p>東京都出身</p>
                        <p>趣味：ピアノと作曲</p>
                    </div>
                </div>
            </section>
        </main>

        <aside class="sidebar right-sidebar">
            <nav class="social-nav">
                <ul>
                    <li><a href="https://x.com/sangatsuyuri" target="_blank" title="X"><i
                                class="fa-brands fa-x-twitter"></i></a></li>
                </ul>
            </nav>
        </aside>
    </div>

    <footer>
        <p>&copy; 2024 サンガツユリ All rights reserved.</p>
    </footer>

    <script>
        // ハンバーガーメニューの機能
        const hamburgerMenu = document.getElementById('hamburgerMenu');
        const leftSidebar = document.querySelector('.left-sidebar');

        hamburgerMenu.addEventListener('click', () => {
            leftSidebar.classList.toggle('active');
        });

        // メニュー外をクリックしたら閉じる
        document.addEventListener('click', (e) => {
            if (!leftSidebar.contains(e.target) && !hamburgerMenu.contains(e.target)) {
                leftSidebar.classList.remove('active');
            }
        });

        // テーマ切り替え機能
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = themeToggle.querySelector('i');

        // ローカルストレージから保存されたテーマを取得
        const currentTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', currentTheme);

        // アイコンの初期状態を設定
        if (currentTheme === 'dark') {
            themeIcon.classList.remove('fa-moon');
            themeIcon.classList.add('fa-sun');
        }

        // テーマ切り替えボタンのクリックイベント
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';

            // テーマを切り替え
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);

            // アイコンを切り替え
            if (newTheme === 'dark') {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            } else {
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
            }
        });

        // ページ読み込み時に保存された動静を取得して表示
        window.onload = () => {
            const savedStatus = localStorage.getItem('currentStatus') || 'OFF';
            document.getElementById('currentStatusDisplay').textContent = `現在の動静: ${savedStatus}`;
        };
    </script>

    <script>
        // ページ読み込み時にサーバーから動静を取得
        window.onload = () => {
            fetch('http://localhost:3000/getStatus')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('サーバーエラー');
                    }
                    return response.json();
                })
                .then(data => {
                    // サーバーから取得した動静を表示
                    document.getElementById('currentStatusDisplay').textContent = `現在の動静: ${data.status}`;
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('サーバーとの通信に失敗しました。');
                });
        };
    </script>
</body>

</html>